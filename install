#!/bin/bash

{
main() {
    if ! required_python_version; then 
        err "wton supports python3 version higher than 3.8. Please, install new python3 version from the official repository: https://www.python.org/downloads/. Then run your command again."
        exit 1
    fi

    python3 -m pip install -U pip
    python3 -m pip install wton

    printf "wton has been installed succesfully!" 1>&2
}

required_python_version() {
    python3 -c 'import sys; exit(1) if sys.version_info.major < 3 and sys.version_info.minor < 8 else exit(0)'
}

err() {
    printf 'wton installation: %s\n' "$1" >&2
    exit 1
}

main "$@"
}
